<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SIAPI PLATINUM | ðŸ’Ž HUB</title>

    <!-- SDKS FIREBASE COMPAT -->
    <script src="https://www.gstatic.com"></script>
    <script src="https://www.gstatic.com"></script>
    <script src="https://www.gstatic.com"></script>

    <!-- PUB MONETAG -->
    <script src="https://alwingulla.com" data-zone="8884441" async></script>

    <style>
        :root { --primary: #00ff88; --dark: #050505; --gold: #ffd700; --violet: #8a2be2; --glass: rgba(255,255,255,0.05); }
        body { font-family: 'Segoe UI', sans-serif; background: var(--dark); color: white; margin: 0; padding-bottom: 100px; overflow-x: hidden; }
        
        /* HEADER AVEC BOUTON SIAPI */
        .header-top { padding: 15px; background: #000; border-bottom: 2px solid var(--violet); text-align: center; display: flex; justify-content: center; }
        .logo-siapi { border: 2px solid var(--primary); border-radius: 50%; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; font-weight: 900; color: var(--primary); box-shadow: 0 0 15px rgba(0,255,136,0.3); }

        /* FOOTER AVEC LE SOLDE */
        .footer-wallet { position: fixed; bottom: 0; width: 100%; background: #000; border-top: 2px solid var(--primary); padding: 10px; display: flex; flex-direction: column; align-items: center; z-index: 1000; }
        .wallet-amount { font-size: 28px; font-weight: 900; color: var(--primary); }
        .wallet-fcfa { font-size: 12px; color: var(--gold); font-weight: bold; margin-top: -5px; }

        /* CONTENU CENTRAL */
        .container { display: flex; flex-direction: column; align-items: center; padding: 15px; }
        .card { background: var(--glass); margin: 10px 0; padding: 20px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); width: 100%; box-sizing: border-box; text-align: center; }
        .btn-main { background: linear-gradient(135deg, var(--violet), #4b0082); color: white; border: none; padding: 15px; border-radius: 12px; font-weight: bold; width: 100%; cursor: pointer; margin: 10px 0; }
        .btn-vpn { background: var(--primary); color: black; font-weight: 900; }

        input { width: 100%; padding: 12px; margin: 8px 0; background: rgba(0,0,0,0.5); border: 1px solid var(--violet); border-radius: 8px; color: white; text-align: center; box-sizing: border-box; }
        #auth-section { display: none; }
        .show-auth { display: block !important; }

        #toast { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background: var(--primary); color: #000; padding: 10px 25px; border-radius: 50px; font-weight: bold; transition: 0.5s; z-index: 50000; }
        #toast.show { top: 20px; }
    </style>
</head>
<body>

    <div id="toast"><span id="toast-msg">Connexion...</span></div>

    <!-- HAUT : BOUTON SIAPI -->
    <header class="header-top">
        <div class="logo-siapi">SIAPI</div>
    </header>

    <div class="container">
        <!-- VPN & PUB -->
        <div class="card" style="border: 1px solid var(--primary);">
            <div id="vpn-timer-display" style="font-size: 38px; font-weight: 900; color: var(--gold); margin-bottom: 5px;">00:00:00</div>
            <button onclick="rechargeVPN()" class="btn-main btn-vpn">RECHARGER VPN (PUB) ðŸ“º</button>
            <p style="font-size: 10px; color: #888; margin-top: 5px;">+10F par publicitÃ© visionnÃ©e</p>
        </div>

        <!-- PARRAINAGE -->
        <div class="card">
            <small style="color: var(--gold);">LIEN DE PARRAINAGE (+25F)</small>
            <input type="text" id="ref-link" readonly value="Connectez-vous pour voir le lien">
            <button onclick="copyRef()" class="btn-main" style="background: var(--gold); color: black; height: 45px; padding: 0;">COPIER LE LIEN</button>
        </div>

        <!-- LOGIN / SAVE -->
        <button id="btn-toggle-login" onclick="toggleAuth()" class="btn-main" style="background: transparent; border: 1px solid var(--violet); color: var(--violet);">ðŸ’¾ SAUVEGARDER / SE CONNECTER</button>

        <div id="auth-section" class="card">
            <h4 style="margin: 0 0 10px 0; color: var(--violet);">VOTRE COMPTE</h4>
            <input type="email" id="reg-email" placeholder="Email">
            <input type="password" id="reg-pass" placeholder="Mot de passe">
            <button class="btn-main" onclick="handleAuth()">VALIDER L'ACCÃˆS</button>
        </div>
    </div>

    <!-- BAS : LE SOLDE -->
    <footer class="footer-wallet">
        <div class="wallet-amount" id="user-balance">0.00 $</div>
        <div class="wallet-fcfa" id="user-balance-fcf">0 FCFA</div>
    </footer>

    <script>
        // CONFIGURATION FIREBASE (REMPLACER PAR TES VRAIES INFOS)
        const firebaseConfig = {
            apiKey: "VOTRE_API_KEY",
            authDomain: "VOTRE_PROJET.firebaseapp.com",
            databaseURL: "https://VOTRE_PROJET-default-rtdb.firebaseio.com",
            projectId: "VOTRE_PROJET",
            storageBucket: "VOTRE_PROJET.appspot.com",
            messagingSenderId: "VOTRE_SENDER_ID",
            appId: "VOTRE_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();
        let currentUser = null;

        // AUTH & SYNC
        async function handleAuth() {
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;
            const urlParams = new URLSearchParams(window.location.search);
            const refBy = urlParams.get('ref');

            if(!email || !pass) return showToast("Remplissez les champs");

            try {
                const res = await auth.signInWithEmailAndPassword(email, pass);
                loadUserData(res.user.uid);
            } catch (e) {
                auth.createUserWithEmailAndPassword(email, pass).then(res => {
                    const uid = res.user.uid;
                    if(refBy) db.ref('users/' + refBy + '/balance').transaction(b => (b || 0) + 0.04);
                    db.ref('users/' + uid).set({ balance: 0, vpnTime: 0, email: email });
                    loadUserData(uid);
                }).catch(err => showToast(err.message));
            }
        }

        function loadUserData(uid) {
            db.ref('users/' + uid).on('value', (snap) => {
                const data = snap.val();
                if(!data) return;
                currentUser = { uid, ...data };
                
                document.getElementById('user-balance').innerText = data.balance.toFixed(2) + " $";
                document.getElementById('user-balance-fcf').innerText = Math.floor(data.balance * 600) + " FCFA";
                document.getElementById('ref-link').value = window.location.origin + "?ref=" + uid;
                
                document.getElementById('auth-section').classList.remove('show-auth');
                document.getElementById('btn-toggle-login').innerText = "âœ… CONNECTÃ‰ (" + data.email.split('@')[0] + ")";
                
                if(data.vpnTime > 0) startTimer(data.vpnTime);
            });
        }

        // VPN & PUB
        function rechargeVPN() {
            if(!currentUser) { 
                showToast("Connectez-vous pour gagner des F !");
                toggleAuth();
                return;
            }
            if(typeof show_8884441 === 'function') {
                show_8884441().then(() => {
                    db.ref('users/' + currentUser.uid).update({ 
                        vpnTime: 7200, 
                        balance: (currentUser.balance || 0) + 0.016 // Environ 10F
                    });
                    showToast("VPN +2H & GAIN +10F âœ…");
                });
            } else {
                showToast("PublicitÃ© en cours...");
            }
        }

        function startTimer(sec) {
            const disp = document.getElementById('vpn-timer-display');
            const interval = setInterval(() => {
                if(sec <= 0) { clearInterval(interval); return; }
                sec--;
                let h=Math.floor(sec/3600), m=Math.floor((sec%3600)/60), s=sec%60;
                disp.innerText = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
                if(sec % 60 === 0) db.ref('users/' + currentUser.uid).update({ vpnTime: sec });
            }, 1000);
        }

        function toggleAuth() { document.getElementById('auth-section').classList.toggle('show-auth'); }
        function showToast(m) { const t=document.getElementById('toast'); document.getElementById('toast-msg').innerText=m; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),3000); }
        function copyRef() { const l=document.getElementById('ref-link'); l.select(); navigator.clipboard.writeText(l.value); showToast("Lien copiÃ© !"); }
    </script>
</body>
</html>
